{"version":3,"file":"pau-table-of-contents-block/index.js","mappings":"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,0C;;;;;;;;;;ACAA,6C;;;;;;;;;;ACAA,wC;;;;;;;;;;ACAA,4C;;;;;;;;;;ACAA,yC;;;;;;;;;;ACAA,sC;;;;;;;;;;ACAA,2C;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;;;;WCzBA;WACA;WACA;WACA;WACA,+BAA+B,wCAAwC;WACvE;WACA;WACA;WACA;WACA,iBAAiB,qBAAqB;WACtC;WACA;WACA,kBAAkB,qBAAqB;WACvC;WACA;WACA,KAAK;WACL;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,E;;;;;WC3BA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA,E;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA,E;;;;;WCPA,wF;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D,E;;;;;WCNA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM,qBAAqB;WAC3B;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA,4G;;;;;UEjDA;UACA;UACA;UACA;UACA","sources":["webpack://pau-table-of-contents-block/./src/pau-table-of-contents-block/edit.js","webpack://pau-table-of-contents-block/./src/pau-table-of-contents-block/editor.scss?5a2b","webpack://pau-table-of-contents-block/./src/pau-table-of-contents-block/index.js","webpack://pau-table-of-contents-block/./src/pau-table-of-contents-block/save.js","webpack://pau-table-of-contents-block/./src/pau-table-of-contents-block/style.scss?cacd","webpack://pau-table-of-contents-block/external window [\"wp\",\"apiFetch\"]","webpack://pau-table-of-contents-block/external window [\"wp\",\"blockEditor\"]","webpack://pau-table-of-contents-block/external window [\"wp\",\"blocks\"]","webpack://pau-table-of-contents-block/external window [\"wp\",\"components\"]","webpack://pau-table-of-contents-block/external window [\"wp\",\"element\"]","webpack://pau-table-of-contents-block/external window [\"wp\",\"i18n\"]","webpack://pau-table-of-contents-block/external window \"ReactJSXRuntime\"","webpack://pau-table-of-contents-block/webpack/bootstrap","webpack://pau-table-of-contents-block/webpack/runtime/chunk loaded","webpack://pau-table-of-contents-block/webpack/runtime/compat get default export","webpack://pau-table-of-contents-block/webpack/runtime/define property getters","webpack://pau-table-of-contents-block/webpack/runtime/hasOwnProperty shorthand","webpack://pau-table-of-contents-block/webpack/runtime/make namespace object","webpack://pau-table-of-contents-block/webpack/runtime/jsonp chunk loading","webpack://pau-table-of-contents-block/webpack/before-startup","webpack://pau-table-of-contents-block/webpack/startup","webpack://pau-table-of-contents-block/webpack/after-startup"],"sourcesContent":["/**\n* Retrieves the required components from the WordPress packages.\n*/\nimport { __ } from '@wordpress/i18n';\n/**\n * React hook that is used to mark the block wrapper element.\n * It provides all the necessary props like the class name.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/packages/packages-block-editor/#useblockprops\n */\nimport {\n\tuseBlockProps,\n\t// RichText is kept only as a disabled placeholder for dynamic block info\n\tAlignmentToolbar,\n\tBlockControls,\n\tInspectorControls\n} from '@wordpress/block-editor';\nimport { ToolbarGroup, PanelBody, SelectControl, Button, Dashicon, Spinner } from '@wordpress/components';\nimport { useState, useEffect } from '@wordpress/element';\nimport apiFetch from '@wordpress/api-fetch';\n/**\n * Lets webpack process CSS, SASS or SCSS files referenced in JavaScript files.\n * Those files can contain any CSS code that gets applied to the editor.\n *\n * @see https://www.npmjs.com/package/@wordpress/scripts#using-css\n */\nimport './editor.scss';\n\n// Helper function to decode HTML entities in titles\nconst decodeHTMLEntities = (text) => {\n\t// Use a temporary textarea element to leverage the browser's DOM parser\n\tconst textarea = document.createElement('textarea');\n\ttextarea.innerHTML = text;\n\treturn textarea.value;\n};\n\n/**\n * Defines the edit function for the block.\n *\n * @param {Object} props\n * @param {Object} props.attributes The block's attributes.\n * @param {Function} props.setAttributes The function to update attributes.\n * @returns {JSX.Element} The editor interface.\n */\nexport default function Edit( { className, attributes: attr, setAttributes } ) {\n\t// Destructuring to include all necessary attributes\n\tconst { category, postOrder, chapterOrder } = attr;\n\n\t// State for data fetched from the WordPress REST API\n\tconst [categories, setCategories] = useState([]);         // All top-level categories (Books)\n\tconst [childCategories, setChildCategories] = useState([]); // Child categories of the selected root (Chapters)\n\tconst [postsByChapter, setPostsByChapter] = useState({});   // Posts associated with each chapter ID\n\tconst [isLoading, setIsLoading] = useState(false);\n\n\t// NEW: Local state to track which chapters are open/closed in the editor preview\n\tconst [openChapters, setOpenChapters] = useState({});\n\n\tconst onChangeAlignment = ( newAlignment ) => {\n\t\tsetAttributes( {\n\t\t\talignment: newAlignment === undefined ? 'none' : newAlignment,\n\t\t} );\n\t};\n\n\tconst onChangeCategory = ( newCat ) => {\n\t\t// Reset state and attributes when root category changes\n\t\tsetAttributes( {\n\t\t\tcategory: newCat === '' ? '' : newCat,\n\t\t\tpostOrder: {},\n\t\t\tchapterOrder: [],\n\t\t} );\n\t\tsetOpenChapters({}); // Reset accordion state\n\t};\n\n\t// NEW: Toggle function for the editor preview accordion\n\tconst handleToggleChapter = (chapterIdStr) => {\n\t\tsetOpenChapters(prevOpen => ({\n\t\t\t...prevOpen,\n\t\t\t[chapterIdStr]: !prevOpen[chapterIdStr]\n\t\t}));\n\t};\n\n\t// 1. Fetch Root Categories (Parent=0) for the initial dropdown\n\tuseEffect(() => {\n\t\tapiFetch({ path: '/wp/v2/categories?parent=0&per_page=100' })\n\t\t\t.then((data) => setCategories(data))\n\t\t\t.catch((error) => console.error(\"Error fetching top-level categories:\", error));\n\t}, []);\n\n\n\t// 2. Fetch Child Categories (Chapters) when the root category changes\n\tuseEffect(() => {\n\t\tif (category && category !== '') {\n\t\t\tsetIsLoading(true);\n\t\t\tconst parentId = parseInt(category, 10);\n\t\t\tconst path = `/wp/v2/categories?parent=${parentId}&per_page=100`;\n\n\t\t\tapiFetch({ path })\n\t\t\t\t.then((data) => {\n\t\t\t\t\tsetChildCategories(data);\n\n\t\t\t\t\t// Initialize chapterOrder attribute\n\t\t\t\t\tconst fetchedChapterIds = data.map(chapter => chapter.id);\n\n\t\t\t\t\tif (chapterOrder.length === 0 || chapterOrder.some(id => !fetchedChapterIds.includes(id))) {\n\t\t\t\t\t\t// Initialize or sanitize chapterOrder if it's empty or contains invalid IDs\n\t\t\t\t\t\t// NOTE: We only update chapterOrder here if a change is needed to avoid unnecessary attribute saves.\n\t\t\t\t\t\tconst existingOrder = chapterOrder.filter(id => fetchedChapterIds.includes(id));\n\t\t\t\t\t\tconst missingIds = fetchedChapterIds.filter(id => !existingOrder.includes(id));\n\t\t\t\t\t\tconst finalOrder = [...existingOrder, ...missingIds];\n\n\t\t\t\t\t\tif (JSON.stringify(chapterOrder) !== JSON.stringify(finalOrder)) {\n\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\tchapterOrder: finalOrder\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tconsole.error(`Error fetching child categories for parent ${parentId}:`, error);\n\t\t\t\t\tsetChildCategories([]);\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t});\n\t\t} else {\n\t\t\tsetChildCategories([]);\n\t\t\tsetPostsByChapter({});\n\t\t\tsetIsLoading(false);\n\t\t}\n\t}, [category]); // Depend on category attribute\n\n\n\t// 3. Fetch Posts for all Child Categories and initialize/sanitize Post Order\n\tuseEffect(() => {\n\t\tif (childCategories.length === 0) {\n\t\t\tsetPostsByChapter({});\n\t\t\tsetIsLoading(false);\n\t\t\treturn;\n\t\t}\n\n\t\t// Start fetching posts\n\t\tsetIsLoading(true);\n\t\tconst fetchPromises = childCategories.map(chapter => {\n\t\t\t// Fetch posts associated with this chapter category ID\n\t\t\treturn apiFetch({\n\t\t\t\tpath: `/wp/v2/posts?categories=${chapter.id}&per_page=100&orderby=date&order=asc&_fields=id,title,link&status=publish,future`\n\t\t\t}).then(posts => ({ chapterId: chapter.id, posts }));\n\t\t});\n\n\t\tPromise.all(fetchPromises)\n\t\t\t.then(results => {\n\t\t\t\tconst newPostsByChapter = {};\n\t\t\t\tlet newPostOrder = { ...postOrder };\n\t\t\t\tlet postOrderChanged = false;\n\n\t\t\t\tresults.forEach(({ chapterId, posts }) => {\n\t\t\t\t\tconst chapterIdStr = String(chapterId);\n\t\t\t\t\tnewPostsByChapter[chapterIdStr] = posts;\n\n\t\t\t\t\t// Get a list of IDs of posts currently found by the API\n\t\t\t\t\tconst fetchedPostIds = posts.map(post => post.id);\n\n\t\t\t\t\t// --- Sanitization and Initialization ---\n\t\t\t\t\t// We use the existing postOrder to sanitize it, but we MUST compare before saving.\n\t\t\t\t\tconst existingOrder = newPostOrder[chapterIdStr] || [];\n\n\t\t\t\t\t// 1. Filter out deleted/unpublished posts from the saved order\n\t\t\t\t\tconst filteredOrder = existingOrder.filter(id => fetchedPostIds.includes(id));\n\n\t\t\t\t\t// 2. Add new posts (found by API but not in filtered order) to the end\n\t\t\t\t\tconst missingPosts = fetchedPostIds.filter(id => !filteredOrder.includes(id));\n\n\t\t\t\t\tconst finalOrder = [...filteredOrder, ...missingPosts];\n\n\t\t\t\t\tif (JSON.stringify(existingOrder) !== JSON.stringify(finalOrder)) {\n\t\t\t\t\t\tnewPostOrder[chapterIdStr] = finalOrder;\n\t\t\t\t\t\tpostOrderChanged = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tsetPostsByChapter(newPostsByChapter);\n\n\t\t\t\t// Update postOrder attribute only if a change was detected during sanitization\n\t\t\t\tif (postOrderChanged) {\n\t\t\t\t\tsetAttributes({ postOrder: newPostOrder });\n\t\t\t\t}\n\n\t\t\t\tsetIsLoading(false);\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tconsole.error(\"Error fetching posts for chapters:\", error);\n\t\t\t\tsetIsLoading(false);\n\t\t\t\tsetPostsByChapter({});\n\t\t\t});\n\n\t\t// FIX: Removed 'postOrder' from dependencies. This hook should only run when chapters change.\n\t\t// Changes to postOrder itself are handled by handleMovePost and should not trigger a re-fetch/re-sanitization\n\t\t// unless 'childCategories' has changed.\n\t}, [childCategories]);\n\n\n\t// 4. Article Reordering Handler\n\tconst handleMovePost = ( chapterIdStr, postId, direction ) => {\n\t\tconst currentPostOrder = postOrder[chapterIdStr];\n\t\tif (!currentPostOrder) return;\n\n\t\tconst currentIndex = currentPostOrder.indexOf( postId );\n\t\tlet newIndex = currentIndex + ( direction === 'up' ? -1 : 1 );\n\n\t\t// Ensure the new index is within bounds\n\t\tif ( newIndex >= 0 && newIndex < currentPostOrder.length ) {\n\t\t\tconst newChapterOrder = [ ...currentPostOrder ];\n\t\t\t// Swap elements\n\t\t\t[ newChapterOrder[ currentIndex ], newChapterOrder[ newIndex ] ] = [ newChapterOrder[ newIndex ], newChapterOrder[ currentIndex ] ];\n\n\t\t\t// Update the block attribute with the new structure\n\t\t\tsetAttributes({\n\t\t\t\tpostOrder: {\n\t\t\t\t\t...postOrder,\n\t\t\t\t\t[chapterIdStr]: newChapterOrder\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\t// 5. Chapter Reordering Handler\n\tconst handleMoveChapter = ( chapterId, direction ) => {\n\t\tconst currentIndex = chapterOrder.indexOf( chapterId );\n\t\tlet newIndex = currentIndex + ( direction === 'up' ? -1 : 1 );\n\n\t\tif ( newIndex >= 0 && newIndex < chapterOrder.length ) {\n\t\t\tconst newChapterOrder = [ ...chapterOrder ];\n\t\t\t// Swap elements\n\t\t\t[ newChapterOrder[ currentIndex ], newChapterOrder[ newIndex ] ] = [ newChapterOrder[ newIndex ], newChapterOrder[ currentIndex ] ];\n\n\t\t\t// Update the block attribute\n\t\t\tsetAttributes({ chapterOrder: newChapterOrder });\n\t\t}\n\t};\n\n\tconst getPostTitle = (chapterIdStr, postId) => {\n\t\tconst posts = postsByChapter[chapterIdStr] || [];\n\t\t// Find the post by its ID in the local state copy\n\t\tconst post = posts.find(p => p.id === postId);\n\t\t// Use the raw title for display in the editor, and decode HTML entities\n\t\treturn post ? decodeHTMLEntities(post.title.rendered) : `[Post ID ${postId} - Title Not Found]`;\n\t};\n\n\tconst getPostLink = (chapterIdStr, postId) => {\n\t\tconst posts = postsByChapter[chapterIdStr] || [];\n\t\tconst post = posts.find(p => p.id === postId);\n\t\treturn post ? post.link : `#`;\n\t};\n\n\tconst getChapterName = (chapterId) => {\n\t\tconst chapterIdInt = parseInt(chapterId, 10);\n\n\t\t// Find the root category name (optional, mainly for the H2 title)\n\t\tconst root = categories.find(c => c.id === parseInt(category, 10));\n\t\tif (root && root.id === chapterIdInt) {\n\t\t\treturn root.name;\n\t\t}\n\n\t\t// Find the child category (chapter) name\n\t\tconst childChapter = childCategories.find(c => c.id === chapterIdInt);\n\t\treturn childChapter ? decodeHTMLEntities(childChapter.name) : `[Category ID ${chapterId} - Name Not Found]`;\n\t}\n\n\tconst blockProps = useBlockProps({\n\t\tclassName: 'wp-block-toc-editor p-4 border border-gray-200 rounded-lg bg-gray-50'\n\t});\n\n\t// Helper to get ordered list of chapter objects\n\tconst getOrderedChapters = () => {\n\t\t// Filter out any chapter IDs that may be in the order but not in the fetched list\n\t\treturn chapterOrder.map(chapterId => {\n\t\t\treturn childCategories.find(c => c.id === chapterId);\n\t\t}).filter(Boolean); // Filter out undefined if a category was deleted\n\t};\n\n\tconst orderedChapters = getOrderedChapters();\n\n\treturn(\n\t\t<div {...blockProps}>\n\t\t\t<BlockControls>\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t<AlignmentToolbar\n\t\t\t\t\t\tvalue={ attr.alignment }\n\t\t\t\t\t\tonChange={ onChangeAlignment }\n\t\t\t\t\t/>\n\t\t\t\t</ToolbarGroup>\n\t\t\t</BlockControls>\n\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={__(\"Settings\", 'pau-table-of-contents-block')}>\n\t\t\t\t\t<SelectControl\n\t\t\t\t\t\tlabel={ __('Root Category', 'pau-table-of-contents-block')}\n\t\t\t\t\t\tvalue = {category}\n\t\t\t\t\t\toptions={ [\n\t\t\t\t\t\t\t{ label: __('Select a root category', 'pau-table-of-contents-block'), value: '' },\n\t\t\t\t\t\t\t...categories.map( (cat) => ({\n\t\t\t\t\t\t\t\tlabel: cat.name,\n\t\t\t\t\t\t\t\tvalue: String(cat.id),\n\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t] }\n\t\t\t\t\t\tonChange={onChangeCategory}\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\n\t\t\t{/* Visual Editor Preview and Reordering Interface */}\n\t\t\t<div className=\"toc-preview-container\" style={ { textAlign: attr.alignment } }>\n\t\t\t\t{ isLoading && (\n\t\t\t\t\t<div className=\"flex items-center space-x-2 p-3 bg-indigo-100 text-indigo-800 rounded\">\n\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t\t<p>Loading chapters and articles...</p>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t{ !isLoading && category && orderedChapters.length > 0 && (\n\t\t\t\t\t<div className=\"wp-block-pau-table-of-contents-block-list\">\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t{/* Loop over the custom ordered list of chapter IDs */}\n\t\t\t\t\t\t{orderedChapters.map((chapter, chapterIndex) => {\n\t\t\t\t\t\t\tconst chapterIdStr = String(chapter.id);\n\t\t\t\t\t\t\t// Use the custom post order from attributes, falling back to an empty array\n\t\t\t\t\t\t\tconst orderedPostIds = postOrder[chapterIdStr] || [];\n\t\t\t\t\t\t\tconst isFirstChapter = chapterIndex === 0;\n\t\t\t\t\t\t\tconst isLastChapter = chapterIndex === orderedChapters.length - 1;\n\n\t\t\t\t\t\t\t// NEW: Check if this chapter is currently open in the editor preview\n\t\t\t\t\t\t\tconst isChapterOpen = openChapters[chapterIdStr] || false;\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<li key={chapter.id}>\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t\t\t\t\t\t{/* Chapter Title and Toggle Button */}\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"chapter-toggle-button\" // Add class for styling/targeting\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleToggleChapter(chapterIdStr)}\n\t\t\t\t\t\t\t\t\t\t\tisTertiary\n\t\t\t\t\t\t\t\t\t\t\taria-expanded={isChapterOpen}\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ padding: 0, margin: 0 }}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Dashicon icon={isChapterOpen ? \"arrow-down\" : \"arrow-right\"} style={{ marginRight: 8 }} />\n\t\t\t\t\t\t\t\t\t\t\t<span>{getChapterName(chapter.id)}</span>\n\t\t\t\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t\t\t\t{/* Chapter Reordering Controls */}\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex space-x-1\">\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\ticon={ <Dashicon icon=\"arrow-up-alt2\" /> }\n\t\t\t\t\t\t\t\t\t\t\t\tlabel={ __( 'Move Chapter Up', 'toc-block' ) }\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={ () => handleMoveChapter( chapter.id, 'up' ) }\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={ isFirstChapter }\n\t\t\t\t\t\t\t\t\t\t\t\tisSmall\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\ticon={ <Dashicon icon=\"arrow-down-alt2\" /> }\n\t\t\t\t\t\t\t\t\t\t\t\tlabel={ __( 'Move Chapter Down', 'toc-block' ) }\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={ () => handleMoveChapter( chapter.id, 'down' ) }\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={ isLastChapter }\n\t\t\t\t\t\t\t\t\t\t\t\tisSmall\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\n\n\t\t\t\t\t\t\t\t\t{isChapterOpen && orderedPostIds.length > 0 && (\n\t\t\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t\t{orderedPostIds.map((postId, index) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<li key={postId}>\n                                        \t<span className=\"text-gray-600 flex-grow pr-2 text-sm\">\n                                           \t\t<a href={getPostLink(chapterIdStr, postId)} onClick={(e) => e.preventDefault()}>\n                                                {getPostTitle(chapterIdStr, postId)}\n                                           \t\t</a>\n                                        \t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex space-x-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon={ <Dashicon icon=\"arrow-up-alt2\" /> }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={ __( 'Move Article Up', 'toc-block' ) }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={ () => handleMovePost( chapterIdStr, postId, 'up' ) }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={ index === 0 }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisSmall\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon={ <Dashicon icon=\"arrow-down-alt2\" /> }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={ __( 'Move Article Down', 'toc-block' ) }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={ () => handleMovePost( chapterIdStr, postId, 'down' ) }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={ index === orderedPostIds.length - 1 }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisSmall\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t{isChapterOpen && orderedPostIds.length === 0 && (\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-gray-500 mt-1 pl-4\">(No articles found in this chapter.)</p>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t{ !isLoading && category && orderedChapters.length === 0 && (\n\t\t\t\t\t<p className=\"p-3 bg-yellow-100 text-yellow-800 rounded\">No chapters (child categories) found for this root category.</p>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n","// extracted by mini-css-extract-plugin\nexport {};","/**\n * Registers a new block provided a unique name and an object defining its behavior.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-registration/\n */\nimport { registerBlockType } from '@wordpress/blocks';\n\n/**\n * Lets webpack process CSS, SASS or SCSS files referenced in JavaScript files.\n * All files containing `style` keyword are bundled together. The code used\n * gets applied both to the front of your site and to the editor.\n *\n * @see https://www.npmjs.com/package/@wordpress/scripts#using-css\n */\nimport './style.scss';\n\n/**\n * Internal dependencies\n */\nimport Edit from './edit';\nimport save from './save';\nimport metadata from './block.json';\n\n/**\n * Every block starts by registering a new block type definition.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-registration/\n */\nregisterBlockType( metadata.name, {\n\t/**\n\t * @see ./edit.js\n\t */\n\tedit: Edit,\n\t/**\n\t * @see ./save.js\n\t */\n\tsave,\n} );\n","/**\n * React hook that is used to mark the block wrapper element.\n * It provides all the necessary props like the class name.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/packages/packages-block-editor/#useblockprops\n */\nimport { useBlockProps } from '@wordpress/block-editor';\n\n/**\n * The save function defines the way in which the different attributes should\n * be combined into the final markup, which is then serialized by the block\n * editor into `post_content`.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-edit-save/#save\n *\n * @return {Element} Element to render.\n */\nexport default function save() {\n\treturn (\n\t\t<p { ...useBlockProps.save() }>\n\t\t\t{ '' }\n\t\t</p>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport {};","module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"ReactJSXRuntime\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"pau-table-of-contents-block/index\": 0,\n\t\"pau-table-of-contents-block/style-index\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunkpau_table_of_contents_block\"] = globalThis[\"webpackChunkpau_table_of_contents_block\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"pau-table-of-contents-block/style-index\"], () => (__webpack_require__(\"./src/pau-table-of-contents-block/index.js\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":["__","useBlockProps","AlignmentToolbar","BlockControls","InspectorControls","ToolbarGroup","PanelBody","SelectControl","Button","Dashicon","Spinner","useState","useEffect","apiFetch","jsx","_jsx","jsxs","_jsxs","decodeHTMLEntities","text","textarea","document","createElement","innerHTML","value","Edit","className","attributes","attr","setAttributes","category","postOrder","chapterOrder","categories","setCategories","childCategories","setChildCategories","postsByChapter","setPostsByChapter","isLoading","setIsLoading","openChapters","setOpenChapters","onChangeAlignment","newAlignment","alignment","undefined","onChangeCategory","newCat","handleToggleChapter","chapterIdStr","prevOpen","path","then","data","catch","error","console","parentId","parseInt","fetchedChapterIds","map","chapter","id","length","some","includes","existingOrder","filter","missingIds","finalOrder","JSON","stringify","fetchPromises","posts","chapterId","Promise","all","results","newPostsByChapter","newPostOrder","postOrderChanged","forEach","String","fetchedPostIds","post","filteredOrder","missingPosts","handleMovePost","postId","direction","currentPostOrder","currentIndex","indexOf","newIndex","newChapterOrder","handleMoveChapter","getPostTitle","find","p","title","rendered","getPostLink","link","getChapterName","chapterIdInt","root","c","name","childChapter","blockProps","getOrderedChapters","Boolean","orderedChapters","children","onChange","label","options","cat","__next40pxDefaultSize","__nextHasNoMarginBottom","style","textAlign","chapterIndex","orderedPostIds","isFirstChapter","isLastChapter","isChapterOpen","onClick","isTertiary","padding","margin","icon","marginRight","disabled","isSmall","index","href","e","preventDefault","registerBlockType","save","metadata","edit"],"sourceRoot":""}